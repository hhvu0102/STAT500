/*  SAS code to analyze CO2 data from random sample of 2014 
	Vehicles.  */

data set1;
input engine cylinder cityMPG gears intake exhaust cityCO2;
datalines;
8.4	10	12	6	0	0	726
6.2	8	14	6	0	0	630
6.2	8	15	6	0	0	614
5.7	8	15	8	0	0	596
5.3	8	16	6	0	0	562
4.8	8	11	6	0	0	793
6.2	8	14	6	0	0	635
5.3	8	15	6	0	0	604
6.2	8	13	6	0	0	684
5.3	8	15	6	0	0	604
5.7	8	14	8	0	0	653
5.3	8	15	6	0	0	604
3.6	6	17	8	0	0	527
6.4	8	13	8	0	0	694
5.4	8	13	6	1	0	693
4.2	8	11	6	1	1	770
5.2	10	13	7	1	1	686
4.2	8	11	6	1	1	770
2	4	22	8	1	1	403
3	6	17	7	1	1	518
2	4	22	5	1	1	390
2	4	21	6	1	1	411
1.6	4	26	6	1	1	339
3.7	6	18	7	1	1	490
3.4	6	21	7	1	1	428
1.4	4	27	6	1	1	325
1.4	4	31	5	1	1	289
5	8	15	6	1	1	588
3.5	6	19	6	1	1	473
1.6	4	28	6	1	1	322
3.4	6	20	7	1	1	452
3.4	6	19	7	1	1	477
3.8	6	18	7	1	1	483
3.8	6	19	7	1	1	481
3.8	6	19	7	1	1	469
2	4	24	8	1	1	376
2	4	20	8	1	1	435
4	8	14	8	1	1	638
2	4	23	8	1	1	387
2	4	21	8	1	1	424
3	6	20	8	1	1	446
3	6	20	8	1	1	447
3	6	22	8	1	1	413
4.4	8	15	6	1	1	607
1.2	4	31	5	1	1	285
3.7	6	19	6	1	1	463
2	4	19	6	1	1	469
3.8	6	16	8	1	1	543
4.7	8	13	6	1	1	690
1.8	4	22	7	1	1	411
3.5	6	19	7	1	1	461
1.6	4	26	6	1	1	351
2	4	23	6	1	1	393
2	4	22	6	1	1	405
2	4	24	8	1	1	376
3	6	17	6	1	1	519
4	8	15	8	1	1	588
6	12	12	8	1	1	710
2	4	23	6	1	1	384
3	6	20	8	1	1	447
3	6	25	8	1	1	350
4.4	8	14	7	1	1	651
4.4	8	15	6	1	1	607
2	4	21	6	1	1	428
3.6	6	18	6	1	1	484
1.4	4	27	6	1	1	327
3.6	6	19	6	1	1	470
2	4	26	6	1	1	335
1.8	4	27	5	1	1	252
1.8	4	31	1	1	1	285
1.6	4	27	6	1	1	327
1.6	4	27	6	1	1	320
2.5	6	20	6	1	1	441
1.5	4	28	4	1	1	316
3.5	6	20	7	1	1	443
4.7	8	17	7	1	1	515
5.5	8	16	7	1	1	557
1.6	4	25	6	1	1	355
1.6	4	25	6	1	1	352
1.6	4	23	6	1	1	379
2	4	26	6	1	1	345
1.2	3	37	1	1	1	241
6.7	12	11	8	1	1	772
2.5	4	19	5	1	1	476
2	4	30	6	1	1	340
2	4	21	6	1	1	421
1.8	4	25	6	1	1	354
4	8	17	7	1	1	531
4.4	8	14	7	1	1	651
3.6	6	18	6	1	1	493
2	4	20	6	1	1	437
3.6	6	18	6	1	1	497
3.6	6	16	8	1	1	568
1.4	4	26	6	1	1	340
3.6	6	19	6	1	1	470
2	4	24	6	1	1	372
1.4	4	28	6	1	1	321
2.4	4	23	6	1	1	387
6.3	12	11	7	1	1	803
2	4	22	6	1	1	410
1.5	4	23	6	1	1	383
2.4	4	24	6	1	1	373
3.5	6	18	6	1	1	490
2	4	24	6	1	1	364
2	4	24	6	1	1	369
2.4	4	36	6	1	1	247
3.7	6	20	7	1	1	454
2.4	4	36	6	1	1	247
4.6	8	16	8	1	1	540
4.6	8	16	8	1	1	571
3	6	15	8	1	1	578
3.5	6	20	7	1	1	456
4.7	8	18	7	1	1	491
5.5	8	16	7	1	1	564
5.5	8	15	7	1	1	578
3.5	6	22	7	1	1	406
2.5	4	24	1	1	1	369
2.5	4	21	6	1	1	420
3.6	6	18	5	1	1	502
2.5	4	40	6	1	1	219
1.8	4	30	1	1	1	290
1.8	4	24	5	1	1	365
2	4	30	6	1	1	331
4	8	16	8	1	1	554
3	6	19	8	1	1	469
3	6	18	8	1	1	484
4.4	8	16	8	1	1	554
2	4	22	8	1	1	400
3.6	6	18	6	1	1	498
3.6	6	18	8	1	1	485
3.6	6	19	8	1	1	466
3.6	6	18	8	1	1	485
5	8	15	8	1	1	589
5	8	15	8	1	1	599
2	4	24	6	1	1	369
3.5	6	17	6	1	1	519
3.6	6	18	7	1	1	494
3	6	17	7	1	1	517
4.8	8	16	7	1	1	572
3	6	17	7	1	1	508
6.6	12	13	8	1	1	709
2	4	20	8	1	1	444
2	4	22	8	1	1	400
3.7	6	17	7	1	1	508
2	4	29	6	1	1	352
3.7	6	17	6	1	1	528
3.7	6	17	6	1	1	528
5	8	15	6	1	1	591
3.6	6	17	8	1	1	523
4	6	16	5	1	1	557
3.5	6	15	6	1	1	599
3.7	6	16	6	1	1	568
3	6	19	8	1	1	522
3.5	6	17	6	1	1	520
2.4	4	22	6	1	1	398
3.5	6	19	6	1	1	474
2.4	4	22	6	1	1	398
2.4	4	22	6	1	1	398
3.6	6	17	6	1	1	536
2.4	4	22	9	1	1	414
2	4	22	1	1	1	406
2.4	4	21	6	1	1	422
3.7	6	18	6	1	1	481
4	6	16	5	1	1	563
3.5	6	19	6	1	1	472
2.7	4	20	6	1	1	437
3	6	24	8	1	1	430
3	6	19	8	1	1	473
2.4	4	20	6	1	1	435
3.6	6	16	6	1	1	550
3.6	6	16	6	1	1	550
2.4	4	22	5	1	1	399
2.4	4	19	6	1	1	466
2	4	21	6	1	1	432
2.4	4	20	6	1	1	440
3.7	6	16	7	1	1	546
3.2	6	19	9	1	1	473
2.4	4	21	9	1	1	429
3.6	6	16	5	1	1	557
3.5	6	18	6	1	1	507
2.5	4	24	6	1	1	370
3.5	6	19	7	1	1	480
2.5	4	25	1	1	1	357
2.5	4	22	6	1	1	409
3.6	6	16	5	1	1	551
4	6	15	6	1	1	574
3.6	6	17	6	1	1	536
3.5	6	17	6	1	1	518
3	6	19	8	1	1	541
4.4	8	14	8	1	1	619
3.6	6	16	6	1	1	551
3.5	6	16	6	1	1	558
5	8	14	8	1	1	654
5.6	8	12	5	1	1	725
5.6	8	12	5	1	1	722
4.8	8	16	8	1	1	568
3.5	6	18	6	1	1	492
3.5	6	28	6	1	1	314
3.6	6	17	8	1	1	520
3	6	20	8	1	1	447
  run;

  ods rtf file="CO2_2014.rtf";
ods graphics on;

/* Print the data file  */

proc print data=set1;
run;
title 'CO2 Analysis';

/* Compute correlations  */

proc corr data=set1;
  var engine cylinder cityMPG gears cityCO2; run;

/* constuct a matrix of scatter plots */

proc sgscatter data=set1;
  matrix engine cylinder cityMPG gears intake exhaust cityCO2/ diagonal=(histogram)
      markerattrs=(size=10 symbol=CircleFilled color=black);
  run;


/*  Compute least squares estimates of regression coefficients
    and output the residuals and predicted values to a file
    that can be used used by other SAS procedures.  */

proc reg data=set1 plots=(diagnostics partial);
  model cityCO2 = engine cylinder cityMPG;
  output out=set2 p=yhat r=residual;
  run;

proc reg data=set1 plots=(diagnostics partial);
model cityCO2 = engine cylinder cityMPG gears;
output out=set3 p=yhat r=residual;

proc reg data=set1 plots=(diagnostics partial);
model cityCO2 = engine cylinder cityMPG gears intake;
output out=set4 p=yhat r=residual;


proc univariate data=set2 normal;
  var residual;
  qqplot;
run;

proc univariate data=set3 normal;
  var residual;
  qqplot;
run;

proc univariate data=set4 normal;
  var residual;
  qqplot;
run;


ods graphics off;
ods rtf close;
